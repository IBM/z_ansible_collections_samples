# *+------------------------------------------------------------------------+
# *| © Copyright IBM Corp. 2025                                             |
# *| [10.17.2025]                                                           |
# *|   - Tested with ACC 1.2.6                                              |
# *|   - Initial release                                                    |
# *| [12.12.2025]                                                           |
# *|   - Tested with ACC 1.2.10                                             |
# *+------------------------------------------------------------------------+

# IP of the ACC LPAR (e.g., "https://9.152.150.224:8081/api")
acc_ip: https://9.120.0.0:8081/api

####### Admin credentails #######

# ACC LPAR's username (default admin username) (e.g., cc_admin)
# Export before run: export ACC_ADMIN_USER=<your_admin_username>
cc_admin_user: "{{ lookup('env', 'ACC_ADMIN_USER') }}"

# Updated password for ACC LPAR (updated admin password) (e.g., "defaultPassw0rd1")
# Export before run: export ACC_ADMIN_PASSWORD=<your_new_password>
cc_admin_password: "{{ lookup('env', 'ACC_ADMIN_PASSWORD') }}"


####### Users(owner) #######

# Specify the owner name for created owner (e.g., cc_owner)
cc_owner_user: "cc_owner"

# Already created Owner's email address (e.g., "xyz.ibm.com")
cc_owner_email: "cc_owner@email.com"

# Owner's old/default password (e.g., "defaultPassw0rd")
# Export before run: export ACC_OWNER_DEFAULT_PASSWORD=<owner_default_password>
cc_owner_default_password: "{{ lookup('env', 'ACC_OWNER_DEFAULT_PASSWORD') }}"

# Owner's new password to update the old one (e.g., "defaultPassw0rd1")
# Export before run: export ACC_OWNER_PASSWORD=<owner_new_password>
cc_owner_password: "{{ lookup('env', 'ACC_OWNER_PASSWORD') }}"


####### Resources that are assigned to the appliance-owner #######

# Already created Resource package name (e.g., "RP01")
package_name: "resource_package_1"

###########################################################################################
# For single LPAR execution, comment out the lines below in the script 04_install_flow.yaml:
# name: "{{ lpar_name1 }}"
# execution_action: "{{ execution_action }}"
# install: "{{ install }}"
###########################################################################################

# LPAR name for resource assignment (e.g., "BLUEC1") should be valid lpar name in which "image" will be installed
lpar_name1: "CC16"
lpar_name2: "CC09"

####### Image #######

###########################################################################################
# SSA Image Installation Configuration
#
# This section defines the parameters needed to install an SSA (Secure Service
# Appliance) image onto the target IBM Z environment.
#
# The SSA image file is deployed from the control node (e.g., a
# management workstation or laptop) to the designated appliance LPAR.
#
# The parameters below define:
#   - The location of the image file
#   - The minimum cores and memory resources required for installation
#   - The type of image being installed (image or fix)
#
# min_ifls
# ------------------------------------------------------------------------------
# The minimum number of IFLs (Integrated Facility for Linux) required by
# the SSA appliance to run successfully.
#
# Since SSA runs as a Linux-based appliance on IBM Z, at least 2 IFLs
# are required. For better performance, more can be assigned depending on
# the expected workload.
#
# Guidance:
#   - Minimum: 2 IFLs (required for installation)
#   - Recommended: 2–4 IFLs for production or performance testing
#
# min_memory
# ------------------------------------------------------------------------------
# The minimum memory 51200 (in MB) required by the SSA appliance.
# This is the least amount of memory needed to install and boot the image.
#
# Memory should always be a multiple of 1024 (1 GB).
###########################################################################################

# Path on the control node (e.g., your laptop) with the image file which you want to install
image_path: "/Users/zssa.img.gz"

# Number of IFLs, Minimum IFLs required by the appliance (e.g., 2)
min_ifls: 2

# Number of memory, Minimum memory required by the appliance (e.g., 51200)
min_memory: 51200

# This is default type of image
image_type: "image"

# This is the fix type of image
image_fix_type: "fix"


####### Image install #######

# **********************************************************************************************
# Image Installation Parameters
#
# This section controls how an appliance image, managed by ACC (like SSA, Spyre Support Appliance),
# is deployed and configured on the target LPAR.
#
# The parameters define whether to perform a new installation or reuse an
# existing image, as well as the cores and memory resources to assign to
# the appliance during startup.
# Defines the hostname that will be assigned to the SSA image after installation.
# **********************************************************************************************

# Set "install" to true, to install a new image on a LPAR, or false to reuse the existing disk image
# - true = install new image
# - false = use existing disk image
install: true

# Hostname to assign to the installed image
hostname: "host"

# Number of cores allocated to the appliance.
# This value represents the cores assigned to each appliance LPAR.
app_cores: 2

# Memory (in MB) allocated for the appliance.
# This value represents the memory assigned to each appliance LPAR.
app_memory: 51200


####### Appliance credential #######

# Set Username for the appliance (used during appliance installation)
# If you have not used ACC to install the appliance, then this is the username of the SSC LPAR.
# Export before run: export APP_USERNAME=<appliance_username>
app_username: "{{ lookup('env', 'APP_USERNAME') }}"

# Set Password for the appliance (used during password installation)
# If you have not used ACC to install the appliance, then this is the password of the SSC LPAR.
# Export before run: export APP_PASSWORD=<appliance_password>
app_password: "{{ lookup('env', 'APP_PASSWORD') }}"


####### Available execution mode #######

# . For default ACC (i.e, hmc_managed=true): "default", "prep_lpar_only", "appliance_only", "switch_to_installer"
# . Standalone ACC (i.e, hmcmanaged=false): "appliance_only", "switch_to_installer"
execution_action: "default"


####################################################################################################################
# In HMC, go to Customize Image Profile, navigate to the Processor section and check the processor type and value,
# - Dedicated central processors
# - Not Dedicated central processors
# - Dedicated integrated facility for Linux Systems
# - Not dedicated integrated facility for Linux Systems
# Based on the selected processor value, determine the appropriate configuration for processor_usage and processor_type
####################################################################################################################

# Set "processor_type" to "ifl" ("Integrated Facility for Linux Systems") when you're specifying IFL values for resource package
# otherwise set it to "general-purpose" for central processors
# Set processor_type for the LPAR (used during image installation)
# Keep in mind, the processor type defined here correlates to the min_ifl value defined earlier.
#   - For example, if min_ifls is set to 2 and processor_type is "ifl", then 2 IFLs will be assigned as the minimum for the appliance. 
#     If min_ifls is set to 2 and processor_type is "general-purpose", then 2 gps will be assigned as the minimum for the appliance.
processor_type: "general-purpose"

# Set "processor_usage" to "shared" if the processor in the image profile is "not dedicated", and "dedicated" if it is dedicated.
# Set processor_usage for the LPAR (used during image installation)
processor_usage: "shared"
